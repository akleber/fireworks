// https://pastebin.com/SwSuSpkN

// http://soliton.vm.bytemark.co.uk/pub/cpt-city/bhw/bhw4/tn/bhw4_062.png.index.html
DEFINE_GRADIENT_PALETTE( bhw4_062_gp ) {
    0,   4,  1, 12,
   15,  10,  2, 25,
   35,  28, 16,138,
   63, 210,108,205,
  107,  47, 18, 74,
  137, 229,244,255,
  153, 165,118,228,
  178,  83, 53,174,
  209,   8,  2, 42,
  242,   1,  1, 12,
  255,   1,  1, 12};


// http://soliton.vm.bytemark.co.uk/pub/cpt-city/ds/icons/tn/Fire-2.png.index.html
DEFINE_GRADIENT_PALETTE( Fire_2_gp ) {
    0, 255,255,  0,
  127, 255, 55,  0,
  255, 255,  0,  0};


// http://soliton.vm.bytemark.co.uk/pub/cpt-city/bhw/bhw4/tn/bhw4_018.png.index.html
DEFINE_GRADIENT_PALETTE( bhw4_018_gp ) {
    0,  32,  1, 26,
   45,  49,  1, 11,
   76, 121,  2,  8,
  104, 194,  7,  3,
  127, 222, 36,  1,
  160, 227,107,  1,
  255,  92, 16,  2};





//Head


// http://soliton.vm.bytemark.co.uk/pub/cpt-city/bhw/bhw3/tn/bhw3_60.png.index.html
DEFINE_GRADIENT_PALETTE( bhw3_60_gp ) {
    0,  14,  1, 27,
   51,  42,  0, 45,
   86, 104, 22,153,
  127, 182,166,192,
  165, 104, 22,153,
  204,  42,  0, 45,
  255,  14,  1, 27};

// Gradient palette "bhw1_14_gp", originally from
// http://soliton.vm.bytemark.co.uk/pub/cpt-city/bhw/bhw1/tn/bhw1_14.png.index.html
// converted for FastLED with gammas (2.6, 2.2, 2.5)
// Size: 36 bytes of program space.

DEFINE_GRADIENT_PALETTE( bhw1_14_gp ) {
    0,   0,  0,  0,
   12,   1,  1,  3,
   53,   8,  1, 22,
   80,   4,  6, 89,
  119,   2, 25,216,
  145,   7, 10, 99,
  186,  15,  2, 31,
  233,   2,  1,  5,
  255,   0,  0,  0};

// Gradient palette "bhw4_051_gp", originally from
// http://soliton.vm.bytemark.co.uk/pub/cpt-city/bhw/bhw4/tn/bhw4_051.png.index.html
// converted for FastLED with gammas (2.6, 2.2, 2.5)
// Size: 36 bytes of program space.

DEFINE_GRADIENT_PALETTE( bhw4_051_gp ) {
    0,   1,  1,  4,
   28,  16, 24, 77,
   66,  35, 87,160,
  101, 125,187,205,
  127, 255,233, 13,
  145, 125,187,205,
  193,  28, 70,144,
  224,  14, 19, 62,
  255,   1,  1,  4};


  // Gradient palette "bhw1_28_gp", originally from
// http://soliton.vm.bytemark.co.uk/pub/cpt-city/bhw/bhw1/tn/bhw1_28.png.index.html
// converted for FastLED with gammas (2.6, 2.2, 2.5)
// Size: 32 bytes of program space.

DEFINE_GRADIENT_PALETTE( bhw1_28_gp ) {
    0,  75,  1,221,
   30, 252, 73,255,
   48, 169,  0,242,
  119,   0,149,242,
  170,  43,  0,242,
  206, 252, 73,255,
  232,  78, 12,214,
  255,   0,149,242};
// Gradient palette "bhw2_xc_gp", originally from
// http://soliton.vm.bytemark.co.uk/pub/cpt-city/bhw/bhw2/tn/bhw2_xc.png.index.html
// converted for FastLED with gammas (2.6, 2.2, 2.5)
// Size: 28 bytes of program space.

DEFINE_GRADIENT_PALETTE( bhw2_xc_gp ) {
    0,   4,  2,  9,
   58,  16,  0, 47,
  122,  24,  0, 16,
  158, 144,  9,  1,
  183, 179, 45,  1,
  219, 220,114,  2,
  255, 234,237,  1};

// Gradient palette "bhw2_xmas_gp", originally from
// http://soliton.vm.bytemark.co.uk/pub/cpt-city/bhw/bhw2/tn/bhw2_xmas.png.index.html
// converted for FastLED with gammas (2.6, 2.2, 2.5)
// Size: 48 bytes of program space.

DEFINE_GRADIENT_PALETTE( bhw2_xmas_gp ) {
    0,   0, 12,  0,
   40,   0, 55,  0,
   66,   1,117,  2,
   77,   1, 84,  1,
   81,   0, 55,  0,
  119,   0, 12,  0,
  153,  42,  0,  0,
  181, 121,  0,  0,
  204, 255, 12,  8,
  224, 121,  0,  0,
  244,  42,  0,  0,
  255,  42,  0,  0};
// Gradient palette "bhw2_39_gp", originally from
// http://soliton.vm.bytemark.co.uk/pub/cpt-city/bhw/bhw2/tn/bhw2_39.png.index.html
// converted for FastLED with gammas (2.6, 2.2, 2.5)
// Size: 28 bytes of program space.

DEFINE_GRADIENT_PALETTE( bhw2_39_gp ) {
    0,   2,184,188,
   33,  56, 27,162,
   66,  56, 27,162,
  122, 255,255, 45,
  150, 227, 65,  6,
  201,  67, 13, 27,
  255,  16,  1, 53};

// Gradient palette "bhw2_23_gp", originally from
// http://soliton.vm.bytemark.co.uk/pub/cpt-city/bhw/bhw2/tn/bhw2_23.png.index.html
// converted for FastLED with gammas (2.6, 2.2, 2.5)
// Size: 28 bytes of program space.

DEFINE_GRADIENT_PALETTE( bhw2_23_gp ) {
    0,   0,  0,  0,
   66,  57,227,233,
   96, 255,255,  8,
  124, 255,255,255,
  153, 255,255,  8,
  188,  57,227,233,
  255,   0,  0,  0};


TBlendType currentBlending = LINEARBLEND;                     // NOBLEND or LINEARBLEND for palettes

extern const TProgmemRGBGradientPalettePtr gGradientPalettes[];
extern const uint8_t gGradientPaletteCount;

// Current palette number from the 'playlist' of color palettes
uint8_t gCurrentPaletteNumber = 0;

CRGBPalette16 currentPalette( gGradientPalettes[0]);
CRGBPalette16 targetPalette( gGradientPalettes[1] );

const TProgmemRGBGradientPalettePtr gGradientPalettes[] = {
  bhw2_39_gp,
  bhw2_xmas_gp,
  bhw4_018_gp, 
  Fire_2_gp,
};



const uint8_t gGradientPaletteCount = 
  sizeof( gGradientPalettes) / sizeof( TProgmemRGBGradientPalettePtr );


const TProgmemRGBGradientPalettePtr gGradientHeadPalettes[] = {
  bhw2_23_gp,
  bhw1_28_gp,
  bhw2_xc_gp,
};

uint8_t gCurrentHeadPaletteNumber =0;
CRGBPalette16 headPal(gGradientHeadPalettes[0]);
CRGBPalette16 headTarget(gGradientHeadPalettes[1]);


const uint8_t gGradientPaletteHeadCount = 
  sizeof( gGradientHeadPalettes) / sizeof( TProgmemRGBGradientPalettePtr );

  
  
uint8_t heatindex = 0;
uint8_t heatindex2 = 0;

void paletSetup() {
  
}
void paletBlending()
{
  EVERY_N_SECONDS(5) {
    gCurrentPaletteNumber = addmod8( gCurrentPaletteNumber, 1, gGradientPaletteCount);
    targetPalette = gGradientPalettes[ gCurrentPaletteNumber ];
    
    gCurrentHeadPaletteNumber = addmod8( gCurrentHeadPaletteNumber, 1, gGradientPaletteHeadCount);
    headTarget = gGradientHeadPalettes[ gCurrentHeadPaletteNumber ];
  }

  EVERY_N_MILLISECONDS(40) {
    nblendPaletteTowardPalette( currentPalette, targetPalette, 16);
    nblendPaletteTowardPalette( headPal, headTarget, 150);
  }
}

CRGB palet1(uint8_t brightness, uint8_t saturation){
  
   CRGBPalette16 myPal = headPal;
   heatindex2++;
   heatindex2 = heatindex2%240;

  return ColorFromPalette( myPal, heatindex2, brightness /*, saturation*/);
}

CRGB palet2(uint8_t brightness, uint8_t saturation){
  
   CRGBPalette16 myPal = currentPalette;
   heatindex++;
   heatindex = heatindex%240;

  return ColorFromPalette( myPal, heatindex, brightness /*, saturation*/);
}
